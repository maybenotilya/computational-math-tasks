# Задача 1. Библиотека OpenMP

Давайте рассмотрим книгу В. П. Гергеля “Высокопроизводительные вычисления для
многоядерных многопроцессорных систем” (2010). В главе 11 "Решение
дифференциальных уравнений в частных производных", описывающей проблему
численного решения задачи Дирихле для уравнения Пуассона, содержится алгоритм
11.6 (Блочный подход к методу волновой обработки данных) её решения, который
может быть эффективно распараллелен при помощи OpenMP.
В первой части задания вам следует просто разобраться в этом алгоритме и
реализовать его. Обратите внимание, что он возникает итерационно. Например,
алгоритм 11.2 является корректным, но распараллеливание приводит к замедлению в
25 раз вместо ускорения.
Вторая часть задания — провести численный эксперимент, исследующий
эффективность (или неэффективность) параллельной версии. Модельные краевые
задачи необходимо выбрать самостоятельно, исходя из того, что вы хотели бы теми
или иными экспериментами продемонстрировать. Это наиболее сложная часть
задания.

# Теория
Рассмотрим сетку размером `NB x NB` блоков. Посчитаем, сколько "шагов" нужно для обработки всех блоков во время одной итерации.
* Последовательный алгоритм. Очевидно, придется обработать каждый блок, поэтому потребуется `NB * NB` шагов.
* Параллельный алгоритм. Пусть алгоритм исполняется на `nthreads` потоках. Во время параллельного исполнения за один шаг может обрабатываться вплоть до `nthreads` блоков, но только в рамках одной волны. Таким образом, потребуется $2\displaystyle\sum_{i = 1}^{NB - 1} ceil(i / nthreads) + ceil(NB / nthreads)$.

# Эксперимент

Тестовый стенд
* CPU Intel Core i5-12500H (12 физических ядер, 16 логических ядер)
* 16 GB RAM
* g++ (GCC) 13.2.1

Эксперименты проводились для значений:

1. `nthreads = 1, 2, 4, 8`
2. `N = 1000`
3. `block_size = 2, 4, 8, 32, 64`
4. `eps = 0.1`

## Выбор модельных задач
Ускорение, получаемое при распараллеливании, не может зависить от выбора функции никак, кроме количества итераций. И в параллельной, и в последоватенльной версии в каждом обрабатываемом блоке будут выполняться одни и те же операции одинаковое количество раз, на скорость выполнения этих операций значения в узлах сетки, определяемые выбором модельной функции, влияют очень слабо. Таким образом, выберем две модельные функции, для которых необходимое количество итераций для сходимости алгоритма отличается сильно:


* Задачу из книги
    * $f(x, y) = 0$
    * $g(x, y) = $

        $100 - 200x, ~y = 0$

        $100 - 200y, ~x = 0$

        $-100 + 200x, ~y = 1$

        $-100 + 200y, ~x = 1$

* Задачу 1
    * $f(x, y) = \dfrac{2000}{xy}$
    * $g(x, y) = 100x^2 + 200y^3$

Для каждого набора параметров были запущены 5 итераций, все результаты итераций сохранены в `csv` файлы в директории `csv`.